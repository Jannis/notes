# SSL/TLS

TLS 1.0 and 1.1 are deprecated, but many servers still enable them by
default. There are also TLS/SSL ciphers that are unsafe to use but are often
enabled.

## Checking a Domain

Domains can easily be checked for SSL/TLS vulernabilities using one of the
following tools:

- [testssl.sh](https://testssl.sh/):
  ```bash
  docker run --rm -ti  drwetter/testssl.sh <DOMAIN>
  ```
- The [Geekflare TLS Scanner](https://gf.dev/tls-scanner)
- [SSL Labs](https://www.ssllabs.com/ssltest/analyze.html)

## Google Cloud

Google Cloud by default enables TLS 1.0, 1.1 and uses the `COMPATIBLE`
profile. A much safer choice is to enable an SSL policy that requires at
least TLS 1.3 and uses either the `MODERN` or `RESTRICTED` profile.

An overview of the profiles and features available on Google Cloud can be
found [here](https://cloud.google.com/load-balancing/docs/ssl-policies-concepts#defining_an_ssl_policy.)

An SSL policy can be created easily using
([source](https://cloud.google.com/load-balancing/docs/use-ssl-policies)):

```bash
gcloud compute ssl-policies create <POLICY_NAME> \
    --profile COMPATIBLE|MODERN|RESTRICTED|CUSTOM \
    --global \
    [--min-tls-version 1.0|1.1|1.2] \
    [--custom-features FEATURES]
```

After that, it can be enabled in [[google-cloud-https]] by adding it to a
target SSL or HTTPS proxy using:

```bash
gcloud compute target-https-proxies update <NAME> \
--ssl-policy <POLICY_NAME>
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[google-cloud-https]: google-cloud-https "Google Cloud HTTPS"
[//end]: # "Autogenerated link references"
